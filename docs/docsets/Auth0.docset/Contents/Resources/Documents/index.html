<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Auth0  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Auth0  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Auth0 2.0.1 Docs
        </a>
         (97% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/auth0/Auth0.swift">
            <img class="header-icon" src="img/gh.png" alt="GitHub"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Auth0 Reference</a>
      <img class="carat" src="img/carat.png" alt=""/>
      Auth0  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Credentials.html">Credentials</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/UserPatchAttributes.html">UserPatchAttributes</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Global%20Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global%20Variables.html#/s:5Auth012defaultScopeSSvp">defaultScope</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/PasswordlessType.html">PasswordlessType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/A0SimpleKeychain.html">A0SimpleKeychain</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Data.html">Data</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/String.html">String</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:5Auth014authentication8clientId6domain7sessionAA14Authentication_pSS_SSSo12NSURLSessionCtF">authentication(clientId:domain:session:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:5Auth014authentication7session6bundleAA14Authentication_pSo12NSURLSessionC_So8NSBundleCtF">authentication(session:bundle:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:5Auth05users5token6domain7sessionAA5Users_pSS_SSSo12NSURLSessionCtF">users(token:domain:session:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:5Auth05users5token7session6bundleAA5Users_pSS_So12NSURLSessionCSo8NSBundleCtF">users(token:session:bundle:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/webAuth(clientId:domain:session:)">webAuth(clientId:domain:session:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:5Auth07webAuth8clientId6domain7sessionAA03WebC0_pSS_SSSo12NSURLSessionCtF">webAuth(clientId:domain:session:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/webAuth(session:bundle:)">webAuth(session:bundle:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:5Auth07webAuth7session6bundleAA03WebC0_pSo12NSURLSessionC_So8NSBundleCtF">webAuth(session:bundle:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Auth0APIError.html">Auth0APIError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Auth0Error.html">Auth0Error</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Authentication.html">Authentication</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CredentialsStorage.html">CredentialsStorage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Loggable.html">Loggable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Logger.html">Logger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Trackable.html">Trackable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Users.html">Users</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/WebAuth.html">WebAuth</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/AuthenticationError.html">AuthenticationError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Challenge.html">Challenge</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CredentialsManager.html">CredentialsManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/CredentialsManagerError.html">CredentialsManagerError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/JWK.html">JWK</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/JWKS.html">JWKS</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ManagementError.html">ManagementError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Telemetry.html">Telemetry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/UserInfo.html">UserInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/WebAuthError.html">WebAuthError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:5Auth020AuthenticationResulta">AuthenticationResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:5Auth024CredentialsManagerResulta">CredentialsManagerResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:5Auth012DatabaseUsera">DatabaseUser</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:5Auth016ManagementObjecta">ManagementObject</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:5Auth016ManagementResulta">ManagementResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/WebAuthResult">WebAuthResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:5Auth013WebAuthResulta">WebAuthResult</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='auth0-swift' class='heading'>Auth0.swift</h1>

<p><a href="https://circleci.com/gh/auth0/Auth0.swift/tree/master"><img src="https://img.shields.io/circleci/project/github/auth0/Auth0.swift.svg?style=flat-square" alt="CircleCI"></a>
<a href="https://codecov.io/github/auth0/Auth0.swift"><img src="https://img.shields.io/codecov/c/github/auth0/Auth0.swift/master.svg?style=flat-square" alt="Coverage Status"></a>
<img src="https://img.shields.io/cocoapods/v/Auth0.svg?style=flat-square" alt="Version">
<img src="https://img.shields.io/cocoapods/l/Auth0.svg?style=flat-square" alt="License">
<img src="https://img.shields.io/cocoapods/p/Auth0.svg?style=flat-square" alt="Platform">
<img src="https://img.shields.io/badge/Swift-5.5-orange.svg?style=flat-square" alt="Swift 5.5"></p>

<p>Swift SDK that lets you communicate efficiently with many of the <a href="https://auth0.com/docs/api">Auth0 API</a> endpoints and enables you to seamlessly integrate the Auth0 login.</p>

<p><strong>Migrating from v1? Check the <a href="V2_MIGRATION_GUIDE.md">Migration Guide</a>.</strong></p>

<hr>
<h2 id='table-of-contents' class='heading'>Table of Contents</h2>

<ul>
<li><a href="#documentation"><strong>Documentation</strong></a></li>
<li><a href="#requirements"><strong>Requirements</strong></a></li>
<li><a href="#installation"><strong>Installation</strong></a>

<ul>
<li><a href="#swift-package-manager">Swift Package Manager</a></li>
<li><a href="#cocoapods">Cocoapods</a></li>
<li><a href="#carthage">Carthage</a></li>
</ul></li>
<li><a href="#getting-started"><strong>Getting Started</strong></a>

<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#web-auth-configuration-ios--macos">Web Auth Configuration (iOS / macOS)</a></li>
<li><a href="#web-auth-login-ios--macos">Web Auth Login (iOS / macOS)</a></li>
<li><a href="#web-auth-logout-ios--macos">Web Auth Logout (iOS / macOS)</a></li>
<li><a href="#sso-alert-box-ios--macos">SSO Alert Box (iOS / macOS)</a></li>
</ul></li>
<li><a href="#next-steps"><strong>Next Steps</strong></a>

<ul>
<li><a href="#common-tasks">Common Tasks</a></li>
<li><a href="#web-auth-ios--macos">Web Auth (iOS / macOS)</a></li>
<li><a href="#credentials-manager-ios--macos--tvos--watchos">Credentials Manager (iOS / macOS / tvOS / watchOS)</a></li>
<li><a href="#authentication-api-ios--macos--tvos--watchos">Authentication API (iOS / macOS / tvOS / watchOS)</a></li>
<li><a href="#management-api-users-ios--macos--tvos--watchos">Management API (Users) (iOS / macOS / tvOS / watchOS)</a></li>
<li><a href="#logging">Logging</a></li>
</ul></li>
<li><a href="#advanced-features"><strong>Advanced Features</strong></a>

<ul>
<li><a href="#native-social-login">Native Social Login</a></li>
<li><a href="#organizations">Organizations</a></li>
<li><a href="#bot-detection">Bot Detection</a></li>
</ul></li>
<li><a href="#support-policy"><strong>Support Policy</strong></a></li>
<li><a href="#issue-reporting"><strong>Issue Reporting</strong></a></li>
<li><a href="#what-is-auth0"><strong>What is Auth0?</strong></a></li>
<li><a href="#license"><strong>License</strong></a></li>
</ul>
<h2 id='documentation' class='heading'>Documentation</h2>

<ul>
<li><a href="https://auth0.com/docs/quickstart/native/ios-swift"><strong>Quickstart</strong></a>
<br>Shows how to integrate Auth0.swift into an iOS / macOS application from scratch.</li>
<li><a href="https://github.com/auth0-samples/auth0-ios-swift-sample/tree/master/Sample-01"><strong>Sample app</strong></a>
<br>A complete, running iOS / macOS application you can try.</li>
<li><a href="https://auth0.github.io/Auth0.swift/"><strong>API documentation</strong></a>
<br>Documentation auto-generated from the code comments that explains all the available features.

<ul>
<li><a href="https://auth0.github.io/Auth0.swift/Protocols/WebAuth.html">Web Auth</a></li>
<li><a href="https://auth0.github.io/Auth0.swift/Structs/CredentialsManager.html">Credentials Manager</a></li>
<li><a href="https://auth0.github.io/Auth0.swift/Protocols/Authentication.html">Authentication API Client</a></li>
<li><a href="https://auth0.github.io/Auth0.swift/Protocols/Users.html">Management API Client (Users)</a></li>
</ul></li>
<li><a href="FAQ.md"><strong>FAQ</strong></a>
<br> Answers some common questions about Auth0.swift.</li>
</ul>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>iOS 12+ / macOS 10.15+ / tvOS 12.0+ / watchOS 6.2+</li>
<li>Xcode 12.x / 13.x</li>
<li>Swift 5.3+</li>
</ul>

<blockquote>
<p>⚠️ Check the <a href="#support-policy">Support Policy</a> to learn when dropping Xcode, Swift, and platform versions will not be considered a <strong>breaking change</strong>.</p>
</blockquote>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>Open the following menu item in Xcode:</p>

<p><strong>File &gt; Add Packages&hellip;</strong></p>

<p>In the <strong>Search or Enter Package URL</strong> search box enter this URL: </p>
<pre class="highlight plaintext"><code>https://github.com/auth0/Auth0.swift
</code></pre>

<p>Then, select the dependency rule and press <strong>Add Package</strong>.</p>

<blockquote>
<p>💡 For further reference on SPM, check its <a href="https://developer.apple.com/documentation/swift_packages/adding_package_dependencies_to_your_app">official documentation</a>.</p>
</blockquote>
<h3 id='cocoapods' class='heading'>Cocoapods</h3>

<p>Add the following line to your <code>Podfile</code>:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'Auth0'</span><span class="p">,</span> <span class="s1">'~&gt; 2.0'</span>
</code></pre>

<p>Then, run <code>pod install</code>.</p>

<blockquote>
<p>💡 For further reference on Cocoapods, check their <a href="https://guides.cocoapods.org/using/getting-started.html">official documentation</a>.</p>
</blockquote>
<h3 id='carthage' class='heading'>Carthage</h3>

<p>Add the following line to your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "auth0/Auth0.swift" ~&gt; 2.0
</code></pre>

<p>Then, run <code>carthage bootstrap --use-xcframeworks</code>.</p>

<blockquote>
<p>💡 For further reference on Carthage, check their <a href="https://github.com/Carthage/Carthage#getting-started">official documentation</a>.</p>
</blockquote>
<h2 id='getting-started' class='heading'>Getting Started</h2>
<h3 id='configuration' class='heading'>Configuration</h3>

<p>Auth0.swift needs the <strong>Client ID</strong> and <strong>Domain</strong> of the Auth0 application to communicate with Auth0. You can find these details on the settings page of your <a href="https://manage.auth0.com/#/applications/">Auth0 application</a>. If you are using a <a href="https://auth0.com/docs/brand-and-customize/custom-domains">Custom Domain</a>, use the value of your Custom Domain instead of the value from the settings page.</p>

<blockquote>
<p>⚠️ Make sure that the <a href="https://auth0.com/docs/configure/applications">application type</a> of the Auth0 application is <strong>Native</strong>. If you don’t have a Native Auth0 application already, <a href="https://auth0.com/docs/get-started/create-apps/native-apps">create one</a> before continuing.</p>
</blockquote>
<h4 id='configure-client-id-and-domain-with-a-plist' class='heading'>Configure Client ID and Domain with a plist</h4>

<p>Create a <code>plist</code> file named <code>Auth0.plist</code> in your application bundle with the following content:</p>
<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>ClientId<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>YOUR_AUTH0_CLIENT_ID<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>Domain<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>YOUR_AUTH0_DOMAIN<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</code></pre>
<h4 id='configure-client-id-and-domain-programmatically' class='heading'>Configure Client ID and Domain programmatically</h4>

<details>
  <summary>For Web Auth</summary>

&ldquo;`swift
Auth0
    .webAuth(clientId: &quot;YOUR_AUTH0_CLIENT_ID&rdquo;, domain: &ldquo;YOUR_AUTH0_DOMAIN&rdquo;)
    // &hellip;
&ldquo;`
</details>

<details>
  <summary>For the Authentication API client</summary>

&rdquo;`swift
Auth0
    .authentication(clientId: &ldquo;YOUR_AUTH0_CLIENT_ID&rdquo;, domain: &ldquo;YOUR_AUTH0_DOMAIN&rdquo;)
    // &hellip;
&ldquo;`
</details>

<details>
  <summary>For the Management API client (Users)</summary>

&rdquo;`swift
Auth0
    .users(token: credentials.accessToken, domain: &ldquo;YOUR_AUTH0_DOMAIN&rdquo;) // You only need the Domain
    // &hellip;
&ldquo;`
</details>
<h3 id='web-auth-configuration-ios-macos' class='heading'>Web Auth Configuration (iOS / macOS)</h3>
<h4 id='configure-callback-and-logout-urls' class='heading'>Configure callback and logout URLs</h4>

<p>The callback and logout URLs are the URLs that Auth0 invokes to redirect back to your application. Auth0 invokes the callback URL after authenticating the user, and the logout URL after removing the session cookie.</p>

<p>Since callback and logout URLs can be manipulated, you will need to add your URLs to the <strong>Allowed Callback URLs</strong> and <strong>Allowed Logout URLs</strong> fields in the settings page of your Auth0 application. This will enable Auth0 to recognize these URLs as valid. If the callback and logout URLs are not set, users will be unable to log in and out of the application and will get an error.</p>

<p>Go to the settings page of your <a href="https://manage.auth0.com/#/applications/">Auth0 application</a> and add the corresponding URL to <strong>Allowed Callback URLs</strong> and <strong>Allowed Logout URLs</strong>, according to the platform of your application. If you are using a <a href="https://auth0.com/docs/brand-and-customize/custom-domains">Custom Domain</a>, replace <code>YOUR_AUTH0_DOMAIN</code> with the value of your Custom Domain instead of the value from the settings page.</p>
<h5 id='ios' class='heading'>iOS</h5>
<pre class="highlight plaintext"><code>YOUR_BUNDLE_IDENTIFIER://YOUR_AUTH0_DOMAIN/ios/YOUR_BUNDLE_IDENTIFIER/callback
</code></pre>
<h5 id='macos' class='heading'>macOS</h5>
<pre class="highlight plaintext"><code>YOUR_BUNDLE_IDENTIFIER://YOUR_AUTH0_DOMAIN/macos/YOUR_BUNDLE_IDENTIFIER/callback
</code></pre>

<p>E.g. if your iOS bundle identifier was <code>com.company.myapp</code> and your Auth0 Domain was <code>company.us.auth0.com</code>, then this value would be:</p>
<pre class="highlight plaintext"><code>com.company.myapp://company.us.auth0.com/ios/com.company.myapp/callback
</code></pre>
<h4 id='configure-custom-url-scheme' class='heading'>Configure custom URL scheme</h4>

<p>Back in Xcode, go to the <strong>Info</strong> tab of your application target settings. In the <strong>URL Types</strong> section, click the <strong>＋</strong> button to add a new entry. There, enter <code>auth0</code> into the <strong>Identifier</strong> field and <code>$(PRODUCT_BUNDLE_IDENTIFIER)</code> into the <strong>URL Schemes</strong> field.</p>

<p>This registers your Bundle Identifer as a custom URL scheme, so the callback and logout URLs can reach your application.</p>
<h3 id='web-auth-login-ios-macos' class='heading'>Web Auth Login (iOS / macOS)</h3>

<p>Import the <code>Auth0</code> module in the file where you want to present the login page.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Auth0</span>
</code></pre>

<p>Then, present the <a href="https://auth0.com/docs/authenticate/login/auth0-universal-login">Universal Login</a> page in the action of your <strong>Login</strong> button.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .webAuth()
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .webAuth()
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>
<h3 id='web-auth-logout-ios-macos' class='heading'>Web Auth Logout (iOS / macOS)</h3>

<p>Logging the user out involves clearing the Universal Login session cookie and then deleting the user&rsquo;s credentials from your application.</p>

<p>Call the <code>clearSession()</code> method in the action of your <strong>Logout</strong> button. Once the session cookie has been cleared, <a href="#clear-stored-credentials">delete the user&rsquo;s credentials</a>.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="n">clearSession</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">success</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Session cookie cleared"</span><span class="p">)</span>
            <span class="c1">// Delete credentials</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    try await Auth0
        .webAuth()
        .clearSession()
    print(&ldquo;Session cookie cleared&rdquo;)
    // Delete credentials
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .webAuth()
    .clearSession()
    .sink(receiveCompletion: { completion in
        switch completion {
        case .finished:
            print(&ldquo;Session cookie cleared&rdquo;)
            // Delete credentials
        case .failure(let error):
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: {})
    .store(in: &cancellables)
&ldquo;`
</details>
<h3 id='sso-alert-box-ios-macos' class='heading'>SSO Alert Box (iOS / macOS)</h3>

<p><img src="assets/sso-alert.png" alt="sso-alert"></p>

<p>Check the <a href="FAQ.md">FAQ</a> for more information about the alert box that pops up <strong>by default</strong> when using Web Auth.</p>

<blockquote>
<p>💡 See also <a href="https://developer.okta.com/blog/2022/01/13/mobile-sso">this blog post</a> for a detailed overview of Single Sign-On (SSO) on iOS.</p>
</blockquote>

<p><a href="#table-of-contents">Go up ⤴</a></p>
<h2 id='next-steps' class='heading'>Next Steps</h2>
<h3 id='common-tasks' class='heading'>Common Tasks</h3>

<ul>
<li><a href="#retrieve-user-information"><strong>Retrieve user information</strong></a>
<br>Fetch the latest user information from the <code>/userinfo</code> endpoint.</li>
<li><a href="#store-credentials"><strong>Store credentials</strong></a>
<br>Store the user&rsquo;s credentials securely in the Keychain.</li>
<li><a href="#retrieve-stored-credentials"><strong>Retrieve stored credentials</strong></a>
<br>Fetch the user&rsquo;s credentials from the Keychain, automatically renewing them if they have expired.</li>
<li><a href="#clear-stored-credentials"><strong>Clear stored credentials</strong></a>
<br>Delete the user&rsquo;s credentials to complete the logout process.</li>
<li><a href="#logging"><strong>Enable debug logging</strong></a>
<br>Print HTTP requests and responses for debugging.</li>
</ul>
<h3 id='web-auth-ios-macos' class='heading'>Web Auth (iOS / macOS)</h3>

<p><strong>See all the available features in the <a href="https://auth0.github.io/Auth0.swift/Protocols/WebAuth.html">API documentation ↗</a></strong></p>

<ul>
<li><a href="#web-auth-signup">Web Auth signup</a></li>
<li><a href="#web-auth-configuration">Web Auth configuration</a></li>
<li><a href="#id-token-validation">ID Token validation</a></li>
<li><a href="#web-auth-errors">Web Auth errors</a></li>
</ul>
<h4 id='web-auth-signup' class='heading'>Web Auth signup</h4>

<p>You can make users land directly on the Signup page instead of the Login page by specifying the <code>&quot;screen_hint&quot;: &quot;signup&quot;</code> parameter. Note that this can be combined with <code>&quot;prompt&quot;: &quot;login&quot;</code>, which indicates whether you want to always show the authentication page or you want to skip if there&rsquo;s an existing session.</p>

<table><thead>
<tr>
<th style="text-align: left">Parameters</th>
<th style="text-align: left">No existing session</th>
<th style="text-align: left">Existing session</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">No extra parameters</td>
<td style="text-align: left">Shows the login page</td>
<td style="text-align: left">Redirects to the callback url</td>
</tr>
<tr>
<td style="text-align: left"><code>&quot;screen_hint&quot;: &quot;signup&quot;</code></td>
<td style="text-align: left">Shows the signup page</td>
<td style="text-align: left">Redirects to the callback url</td>
</tr>
<tr>
<td style="text-align: left"><code>&quot;prompt&quot;: &quot;login&quot;</code></td>
<td style="text-align: left">Shows the login page</td>
<td style="text-align: left">Shows the login page</td>
</tr>
<tr>
<td style="text-align: left"><code>&quot;prompt&quot;: &quot;login&quot;, &quot;screen_hint&quot;: &quot;signup&quot;</code></td>
<td style="text-align: left">Shows the signup page</td>
<td style="text-align: left">Shows the signup page</td>
</tr>
</tbody></table>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">parameters</span><span class="p">([</span><span class="s">"screen_hint"</span><span class="p">:</span> <span class="s">"signup"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<blockquote>
<p>⚠️ The <code>screen_hint</code> parameter will work with the <strong>New Universal Login Experience</strong> without any further configuration. If you are using the <strong>Classic Universal Login Experience</strong>, you need to customize the <a href="https://manage.auth0.com/#/login_page">login template</a> to look for this parameter and set the <code>initialScreen</code> <a href="https://github.com/auth0/lock#database-options">option</a> of the <code>Auth0Lock</code> constructor.</p>
</blockquote>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .webAuth()
        .parameters([&ldquo;screen_hint&rdquo;: &ldquo;signup&rdquo;])
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .webAuth()
    .parameters([&ldquo;screen_hint&rdquo;: &ldquo;signup&rdquo;])
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>
<h4 id='web-auth-configuration' class='heading'>Web Auth configuration</h4>

<p>The following are some of the available Web Auth configuration options. Check the <a href="https://auth0.github.io/Auth0.swift/Protocols/WebAuth.html">API documentation</a> for the full list.</p>
<h5 id='use-any-auth0-connection' class='heading'>Use any Auth0 connection</h5>

<p>Specify an Auth0 connection to directly show that Identity Provider&rsquo;s login page, skipping the <a href="https://auth0.com/docs/authenticate/login/auth0-universal-login">Universal Login</a> page itself. The connection must first be enabled for your Auth0 application in the <a href="https://manage.auth0.com/#/applications/">Dashboard</a>.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">connection</span><span class="p">(</span><span class="s">"facebook"</span><span class="p">)</span> <span class="c1">// Show the Facebook login page</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='add-an-audience-value' class='heading'>Add an audience value</h5>

<p>Specify an <a href="https://auth0.com/docs/secure/tokens/access-tokens/get-access-tokens#control-access-token-audience">audience</a> to obtain an Access Token that can be used to make authenticated requests to a backend. The audience value is the <strong>API Identifier</strong> of your <a href="https://auth0.com/docs/get-started/apis">Auth0 API</a>, e.g. <code>https://example.com/api</code>.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">audience</span><span class="p">(</span><span class="s">"YOUR_AUTH0_API_IDENTIFIER"</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='add-a-scope-value' class='heading'>Add a scope value</h5>

<p>Specify a <a href="https://auth0.com/docs/get-started/apis/scopes">scope</a> to request permission to access protected resources, like the user profile. The default scope value is <code>openid profile email</code>. Regardless of the scope value specified, <code>openid</code> is always included.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">scope</span><span class="p">(</span><span class="s">"openid profile email offline_access read:todos"</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>

<p>Use <code>connectionScope()</code> to configure a scope value for an Auth0 connection.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">connection</span><span class="p">(</span><span class="s">"connection-name"</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">connectionScope</span><span class="p">(</span><span class="s">"user_friends email"</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='use-a-custom-code-urlsession-code-instance' class='heading'>Use a custom <code>URLSession</code> instance</h5>

<p>You can specify a custom <code>URLSession</code> instance for more advanced networking configuration, e.g. customizing timeout values.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">(</span><span class="nv">session</span><span class="p">:</span> <span class="n">customURLSession</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>

<p>Note that this custom <code>URLSession</code> instance will be used when communicating with the Auth0 Authentication API, not when opening the <a href="https://auth0.com/docs/authenticate/login/auth0-universal-login">Universal Login</a> page.</p>
<h4 id='id-token-validation' class='heading'>ID Token validation</h4>

<p>Auth0.swift automatically <a href="https://auth0.com/docs/security/tokens/id-tokens/validate-id-tokens">validates</a> the ID Token obtained from Web Auth login, following the <a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect specification</a>. This ensures the contents of the ID Token have not been tampered with and can be safely used.</p>
<h5 id='custom-domains' class='heading'>Custom Domains</h5>

<p>Users of Auth0 Private Cloud with Custom Domains still on the <a href="https://auth0.com/docs/deploy/private-cloud/private-cloud-migrations/migrate-private-cloud-custom-domains">legacy behavior</a> need to specify a custom issuer to match the Auth0 Domain when performing Web Auth login. Otherwise, the ID Token validation will fail.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">issuer</span><span class="p">(</span><span class="s">"https://YOUR_AUTH0_DOMAIN/"</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>
<h4 id='web-auth-errors' class='heading'>Web Auth errors</h4>

<p>Web Auth will only produce <code><a href="Structs/WebAuthError.html">WebAuthError</a></code> error values. You can find the underlying error (if any) in the <code>cause: Error?</code> property of the <code><a href="Structs/WebAuthError.html">WebAuthError</a></code>. Not all error cases will have an underlying <code>cause</code>. Check the <a href="https://auth0.github.io/Auth0.swift/Structs/WebAuthError.html">API documentation</a> to learn more about the error cases you need to handle, and which ones include a <code>cause</code> value.</p>
<h3 id='credentials-manager-ios-macos-tvos-watchos' class='heading'>Credentials Manager (iOS / macOS / tvOS / watchOS)</h3>

<p><strong>See all the available features in the <a href="https://auth0.github.io/Auth0.swift/Structs/CredentialsManager.html">API documentation ↗</a></strong></p>

<ul>
<li><a href="#store-credentials">Store credentials</a></li>
<li><a href="#check-the-validity-of-stored-credentials">Check the validity of stored credentials</a></li>
<li><a href="#retrieve-stored-credentials">Retrieve stored credentials</a></li>
<li><a href="#retrieve-stored-user-information">Retrieve stored user information</a></li>
<li><a href="#clear-stored-credentials">Clear stored credentials</a></li>
<li><a href="#biometric-authentication">Biometric authentication</a></li>
<li><a href="#credentials-manager-errors">Credentials Manager errors</a></li>
</ul>

<p>The Credentials Manager utility allows you to securely store and retrieve the user&rsquo;s credentials from the Keychain.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">credentialsManager</span> <span class="o">=</span> <span class="kt">CredentialsManager</span><span class="p">(</span><span class="nv">authentication</span><span class="p">:</span> <span class="kt">Auth0</span><span class="o">.</span><span class="nf">authentication</span><span class="p">())</span>
</code></pre>
<h4 id='store-credentials' class='heading'>Store credentials</h4>

<p>When your users log in, store their credentials securely in the Keychain. You can then check if their credentials are still valid when they open your application again.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">didStore</span> <span class="o">=</span> <span class="n">credentialsManager</span><span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">credentials</span><span class="p">:</span> <span class="n">credentials</span><span class="p">)</span>
</code></pre>
<h4 id='check-the-validity-of-stored-credentials' class='heading'>Check the validity of stored credentials</h4>

<p>When the users open your application, check for valid credentials. If they exist, you can retrieve them and redirect the users to the application&rsquo;s main flow without any additional login steps.</p>
<pre class="highlight swift"><code><span class="k">guard</span> <span class="n">credentialsManager</span><span class="o">.</span><span class="nf">hasValid</span><span class="p">()</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// No valid credentials exist, present the login page</span>
<span class="p">}</span>
<span class="c1">// Retrieve stored credentials</span>
</code></pre>
<h4 id='retrieve-stored-credentials' class='heading'>Retrieve stored credentials</h4>

<p>The credentials will be automatically renewed (if expired) using the <a href="https://auth0.com/docs/secure/tokens/refresh-tokens">Refresh Token</a>. <strong>This method is thread-safe.</strong></p>
<pre class="highlight swift"><code><span class="n">credentialsManager</span><span class="o">.</span><span class="n">credentials</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span> 
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await credentialsManager.credentials()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
credentialsManager
    .credentials()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 You need to request the <code>offline_access</code> <a href="https://auth0.com/docs/get-started/apis/scopes">scope</a> when logging in to get a Refresh Token from Auth0.</p>
</blockquote>
<h4 id='retrieve-stored-user-information' class='heading'>Retrieve stored user information</h4>

<p>The stored <a href="https://auth0.com/docs/security/tokens/id-tokens">ID Token</a> contains a copy of the user information at the time of authentication (or renewal, if the credentials were renewed). That user information can be retrieved from the Keychain synchronously, without checking if the credentials expired.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="n">credentialsManager</span><span class="o">.</span><span class="n">user</span>
</code></pre>

<blockquote>
<p>💡 To get the latest user information, use the <code>userInfo(withAccessToken:)</code> method of the Authentication API client.</p>
</blockquote>
<h4 id='clear-stored-credentials' class='heading'>Clear stored credentials</h4>

<p>The stored credentials can be removed from the Keychain by using the <code>clear()</code> method.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">didClear</span> <span class="o">=</span> <span class="n">credentialsManager</span><span class="o">.</span><span class="nf">clear</span><span class="p">()</span>
</code></pre>
<h4 id='biometric-authentication' class='heading'>Biometric authentication</h4>

<p>You can enable an additional level of user authentication before retrieving credentials using the biometric authentication supported by the device, e.g. Face ID or Touch ID.</p>
<pre class="highlight swift"><code><span class="n">credentialsManager</span><span class="o">.</span><span class="nf">enableBiometrics</span><span class="p">(</span><span class="nv">withTitle</span><span class="p">:</span> <span class="s">"Touch to Login"</span><span class="p">)</span>
</code></pre>

<p>If needed, you can specify a particular <code>LAPolicy</code> to be used. E.g. you might want to support Face ID or Touch ID, but also allow fallback to passcode.</p>
<pre class="highlight swift"><code><span class="n">credentialsManager</span><span class="o">.</span><span class="nf">enableBiometrics</span><span class="p">(</span><span class="nv">withTitle</span><span class="p">:</span> <span class="s">"Touch or enter passcode to Login"</span><span class="p">,</span> 
                                    <span class="nv">evaluationPolicy</span><span class="p">:</span> <span class="o">.</span><span class="n">deviceOwnerAuthentication</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>⚠️ Retrieving the user information with <code>credentialsManager.user</code> will not be protected by Biometric authentication.</p>
</blockquote>
<h4 id='credentials-manager-errors' class='heading'>Credentials Manager errors</h4>

<p>The Credentials Manager will only produce <code><a href="Structs/CredentialsManagerError.html">CredentialsManagerError</a></code> error values. You can find the underlying error (if any) in the <code>cause: Error?</code> property of the <code><a href="Structs/CredentialsManagerError.html">CredentialsManagerError</a></code>. Not all error cases will have an underlying <code>cause</code>. Check the <a href="https://auth0.github.io/Auth0.swift/Structs/CredentialsManagerError.html">API documentation</a> to learn more about the error cases you need to handle, and which ones include a <code>cause</code> value.</p>
<h3 id='authentication-api-ios-macos-tvos-watchos' class='heading'>Authentication API (iOS / macOS / tvOS / watchOS)</h3>

<p><strong>See all the available features in the <a href="https://auth0.github.io/Auth0.swift/Protocols/Authentication.html">API documentation ↗</a></strong></p>

<ul>
<li><a href="#login-with-database-connection">Login with database connection</a></li>
<li><a href="#sign-up-with-database-connection">Sign up with database connection</a></li>
<li><a href="#passwordless-login">Passwordless login</a></li>
<li><a href="#retrieve-user-information">Retrieve user information</a></li>
<li><a href="#renew-credentials">Renew credentials</a></li>
<li><a href="#authentication-api-client-configuration">Authentication API client configuration</a></li>
<li><a href="#authentication-api-client-errors">Authentication API client errors</a></li>
</ul>

<p>The Authentication API exposes the AuthN/AuthZ functionality of Auth0, as well as the supported identity protocols like OpenID Connect, OAuth 2.0, and SAML.
We recommend using <a href="https://auth0.com/docs/authenticate/login/auth0-universal-login">Universal Login</a>, but if you prefer to build your own UI you can use our API endpoints to do so. However, some Auth flows (grant types) are disabled by default so you must enable them in the settings page of your <a href="https://manage.auth0.com/#/applications/">Auth0 application</a>, as explained in <a href="https://auth0.com/docs/get-started/applications/update-grant-types">Update Grant Types</a>.</p>

<p>For login or signup with username/password, the <code>Password</code> grant type needs to be enabled in your application. If you set the grants via the Management API you should activate both <code>http://auth0.com/oauth/grant-type/password-realm</code> and <code>Password</code>. Otherwise, the Auth0 Dashboard will take care of activating both when enabling <code>Password</code>.</p>

<blockquote>
<p>💡 If your Auth0 account has the <strong>Bot Detection</strong> feature enabled, your requests might be flagged for verification. Check how to handle this scenario in the <a href="#bot-detection">Bot Detection</a> section.</p>

<p>⚠️ The ID Tokens obtained from Web Auth login are automatically validated by Auth0.swift, ensuring their contents have not been tampered with. <strong>This is not the case for the ID Tokens obtained from the Authentication API client.</strong> You must <a href="https://auth0.com/docs/security/tokens/id-tokens/validate-id-tokens">validate</a> any ID Tokens received from the Authentication API client before using the information they contain.</p>
</blockquote>
<h4 id='login-with-database-connection' class='heading'>Login with database connection</h4>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">login</span><span class="p">(</span><span class="nv">usernameOrEmail</span><span class="p">:</span> <span class="s">"support@auth0.com"</span><span class="p">,</span>
           <span class="nv">password</span><span class="p">:</span> <span class="s">"secret-password"</span><span class="p">,</span>
           <span class="nv">realmOrConnection</span><span class="p">:</span> <span class="s">"Username-Password-Authentication"</span><span class="p">,</span>
           <span class="nv">scope</span><span class="p">:</span> <span class="s">"openid profile email offline_access"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .authentication()
        .login(usernameOrEmail: &ldquo;support@auth0.com&rdquo;,
               password: &ldquo;secret-password&rdquo;,
               realmOrConnection: &ldquo;Username-Password-Authentication&rdquo;,
               scope: &ldquo;openid profile email offline_access&rdquo;)
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .login(usernameOrEmail: &ldquo;support@auth0.com&rdquo;,
           password: &ldquo;secret-password&rdquo;,
           realmOrConnection: &ldquo;Username-Password-Authentication&rdquo;,
           scope: &ldquo;openid profile email offline_access&rdquo;)
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 The default scope value is <code>openid profile email</code>. Regardless of the scope value specified, <code>openid</code> is always included.</p>
</blockquote>
<h4 id='sign-up-with-database-connection' class='heading'>Sign up with database connection</h4>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">signup</span><span class="p">(</span><span class="nv">email</span><span class="p">:</span> <span class="s">"support@auth0.com"</span><span class="p">,</span>
            <span class="nv">password</span><span class="p">:</span> <span class="s">"secret-password"</span><span class="p">,</span>
            <span class="nv">connection</span><span class="p">:</span> <span class="s">"Username-Password-Authentication"</span><span class="p">,</span>
            <span class="nv">userMetadata</span><span class="p">:</span> <span class="p">[</span><span class="s">"first_name"</span><span class="p">:</span> <span class="s">"John"</span><span class="p">,</span> <span class="s">"last_name"</span><span class="p">:</span> <span class="s">"Appleseed"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">user</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"User signed up: </span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let user = try await Auth0
        .authentication()
        .signup(email: &ldquo;support@auth0.com&rdquo;,
                password: &ldquo;secret-password&rdquo;,
                connection: &ldquo;Username-Password-Authentication&rdquo;,
                userMetadata: [&ldquo;first_name&rdquo;: &ldquo;John&rdquo;, &ldquo;last_name&rdquo;: &ldquo;Appleseed&rdquo;])
        .start()
    print(&ldquo;User signed up: \(user)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .signup(email: &ldquo;support@auth0.com&rdquo;,
            password: &ldquo;secret-password&rdquo;,
            connection: &ldquo;Username-Password-Authentication&rdquo;,
            userMetadata: [&ldquo;first_name&rdquo;: &ldquo;John&rdquo;, &ldquo;last_name&rdquo;: &ldquo;Appleseed&rdquo;])
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { user in
        print(&ldquo;User signed up: \(user)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 You might want to log the user in after signup. See <a href="#login-with-database-connection">Login with database connection</a> above for an example.</p>
</blockquote>
<h4 id='passwordless-login' class='heading'>Passwordless login</h4>

<p>Passwordless is a two-step authentication flow that requires the <strong>Passwordless OTP</strong> grant to be enabled for your Auth0 application. Check <a href="https://auth0.com/docs/configure/applications/application-grant-types">our documentation</a> for more information.</p>
<h5 id='1-start-the-passwordless-flow' class='heading'>1. Start the passwordless flow</h5>

<p>Request a code to be sent to the user&rsquo;s email or phone number. For email scenarios, a link can be sent in place of the code.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">(</span><span class="nv">clientId</span><span class="p">:</span> <span class="n">clientId</span><span class="p">,</span> <span class="nv">domain</span><span class="p">:</span> <span class="s">"samples.auth0.com"</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">startPasswordless</span><span class="p">(</span><span class="nv">email</span><span class="p">:</span> <span class="s">"support@auth0.com"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">success</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Code sent"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    try await Auth0
        .authentication()
        .startPasswordless(email: &ldquo;support@auth0.com&rdquo;)
        .start()
    print(&ldquo;Code sent&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .startPasswordless(email: &ldquo;support@auth0.com&rdquo;)
    .start()
    .sink(receiveCompletion: { completion in
        switch completion {
        case .finished:
            print(&ldquo;Code sent&rdquo;)
        case .failure(let error):
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: {})
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 Use <code>startPasswordless(phoneNumber:)</code> to send a code to the user&rsquo;s phone number instead.</p>
</blockquote>
<h5 id='2-login-with-the-received-code' class='heading'>2. Login with the received code</h5>

<p>To complete the authentication, you must send back that code the user received along with the email or phone number used to start the flow.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">(</span><span class="nv">clientId</span><span class="p">:</span> <span class="n">clientId</span><span class="p">,</span> <span class="nv">domain</span><span class="p">:</span> <span class="s">"samples.auth0.com"</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">login</span><span class="p">(</span><span class="nv">email</span><span class="p">:</span> <span class="s">"support@auth0.com"</span><span class="p">,</span> <span class="nv">code</span><span class="p">:</span> <span class="s">"123456"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .authentication()
        .login(email: &ldquo;support@auth0.com&rdquo;, code: &ldquo;123456&rdquo;)
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .login(email: &ldquo;support@auth0.com&rdquo;, code: &ldquo;123456&rdquo;)
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 Use <code>login(phoneNumber:code:)</code> if the code was sent to the user&rsquo;s phone number.</p>
</blockquote>
<h4 id='retrieve-user-information' class='heading'>Retrieve user information</h4>

<p>Fetch the latest user information from the <code>/userinfo</code> endpoint.</p>

<p>This method will yield a <code><a href="Structs/UserInfo.html">UserInfo</a></code> instance. Check the <a href="https://auth0.github.io/Auth0.swift/Structs/UserInfo.html">API documentation</a> to learn more about its available properties.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
   <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
   <span class="o">.</span><span class="nf">userInfo</span><span class="p">(</span><span class="nv">withAccessToken</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">accessToken</span><span class="p">)</span>
   <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
       <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
       <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">user</span><span class="p">):</span>
           <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained user: </span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
       <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
           <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
       <span class="p">}</span>
   <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let user = try await Auth0
        .authentication()
        .userInfo(withAccessToken: credentials.accessToken)
        .start()
    print(&ldquo;Obtained user: \(user)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .userInfo(withAccessToken: credentials.accessToken)
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { user in
        print(&ldquo;Obtained user: \(user)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>
<h4 id='renew-credentials' class='heading'>Renew credentials</h4>

<p>Use a <a href="https://auth0.com/docs/secure/tokens/refresh-tokens">Refresh Token</a> to renew the user&rsquo;s credentials. It&rsquo;s recommended that you read and understand the Refresh Token process beforehand.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">renew</span><span class="p">(</span><span class="nv">withRefreshToken</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">refreshToken</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained new credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .authentication()
        .renew(withRefreshToken: credentials.refreshToken)
        .start()
    print(&ldquo;Obtained new credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .renew(withRefreshToken: credentials.refreshToken)
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained new credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 You need to request the <code>offline_access</code> <a href="https://auth0.com/docs/get-started/apis/scopes">scope</a> when logging in to get a Refresh Token from Auth0.</p>
</blockquote>
<h4 id='authentication-api-client-configuration' class='heading'>Authentication API client configuration</h4>
<h5 id='add-custom-parameters' class='heading'>Add custom parameters</h5>

<p>Use the <code>parameters()</code> method to add custom parameters to any request.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">renew</span><span class="p">(</span><span class="nv">withRefreshToken</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">refreshToken</span><span class="p">)</span> <span class="c1">// Any request</span>
    <span class="o">.</span><span class="nf">parameters</span><span class="p">([</span><span class="s">"key"</span><span class="p">:</span> <span class="s">"value"</span><span class="p">])</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='add-custom-headers' class='heading'>Add custom headers</h5>

<p>Use the <code>headers()</code> method to add custom headers to any request.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">renew</span><span class="p">(</span><span class="nv">withRefreshToken</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">refreshToken</span><span class="p">)</span> <span class="c1">// Any request</span>
    <span class="o">.</span><span class="nf">headers</span><span class="p">([</span><span class="s">"key"</span><span class="p">:</span> <span class="s">"value"</span><span class="p">])</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='use-a-custom-code-urlsession-code-instance' class='heading'>Use a custom <code>URLSession</code> instance</h5>

<p>You can specify a custom <code>URLSession</code> instance for more advanced networking configuration, e.g. customizing timeout values.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">(</span><span class="nv">session</span><span class="p">:</span> <span class="n">customURLSession</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>
<h4 id='authentication-api-client-errors' class='heading'>Authentication API client errors</h4>

<p>The Authentication API client will only produce <code><a href="Structs/AuthenticationError.html">AuthenticationError</a></code> error values. You can find the error information in the <code>info</code> dictionary of the error value. Check the <a href="https://auth0.github.io/Auth0.swift/Structs/AuthenticationError.html">API documentation</a> to learn more about the available <code><a href="Structs/AuthenticationError.html">AuthenticationError</a></code> properties.</p>
<h3 id='management-api-users-ios-macos-tvos-watchos' class='heading'>Management API (Users) (iOS / macOS / tvOS / watchOS)</h3>

<p><strong>See all the available features in the <a href="https://auth0.github.io/Auth0.swift/Protocols/Users.html">API documentation ↗</a></strong></p>

<ul>
<li><a href="#retrieve-user-metadata">Retrieve user metadata</a></li>
<li><a href="#update-user-metadata">Update user metadata</a></li>
<li><a href="#link-an-account">Link an account</a></li>
<li><a href="#management-api-client-configuration">Management API client configuration</a></li>
<li><a href="#management-api-client-errors">Management API client errors</a></li>
</ul>

<p>You can request more information from a user&rsquo;s profile and manage the user&rsquo;s metadata by accessing the Auth0 <a href="https://auth0.com/docs/api/management/v2">Management API</a>.</p>

<p>To call the Management API, you need an Access Token that has the API Identifier of the Management API as a target <a href="https://auth0.com/docs/secure/tokens/access-tokens/get-access-tokens#control-access-token-audience">audience</a> value. Specify <code>https://YOUR_AUTH0_DOMAIN/api/v2/</code> as the audience when logging in to achieve this. </p>

<p>E.g. if you&rsquo;re using Web Auth:</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">audience</span><span class="p">(</span><span class="s">"https://YOUR_AUTH0_DOMAIN/api/v2/"</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>

<blockquote>
<p>💡 Auth0 Access Tokens do not support multiple custom audience values. If you are already using the API Identifier of your own API as the audience because you need to make authenticated requests to your backend, you cannot add the Management API one, and vice versa. Consider instead exposing API endpoints in your backend to perform operations that require interacting with the Management API, and then calling them from your application.</p>

<p>⚠️ For security reasons, native mobile applications are restricted to a subset of the Management API functionality.</p>
</blockquote>
<h4 id='retrieve-user-metadata' class='heading'>Retrieve user metadata</h4>

<p>To call this method, you need to request the <code>read:users</code> scope when logging in. You can get the user ID value from the <code>sub</code> <a href="https://auth0.com/docs/get-started/apis/scopes/openid-connect-scopes#standard-claims">claim</a> of the user&rsquo;s ID Token, or from the <code>sub</code> property of a <code><a href="Structs/UserInfo.html">UserInfo</a></code> instance.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">users</span><span class="p">(</span><span class="nv">token</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">accessToken</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"user id"</span><span class="p">,</span> <span class="nv">fields</span><span class="p">:</span> <span class="p">[</span><span class="s">"user_metadata"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">user</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained user with metadata: </span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let user = try await Auth0
        .users(token: credentials.accessToken)
        .get(&ldquo;user id&rdquo;, fields: [&ldquo;user_metadata&rdquo;])
        .start()
    print(&ldquo;Obtained user with metadata: \(user)&rdquo;) 
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .users(token: credentials.accessToken)
    .get(&ldquo;user id&rdquo;, fields: [&ldquo;user_metadata&rdquo;])
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { user in
        print(&ldquo;Obtained user with metadata: \(user)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 An alternative is to use a <a href="https://auth0.com/docs/customize/actions/triggers/post-login/api-object">post-login Action</a> to add the metadata to the ID Token as a custom claim.</p>
</blockquote>
<h4 id='update-user-metadata' class='heading'>Update user metadata</h4>

<p>To call this method, you need to request either the <code>update:users</code> or the <code>update:users_app_metadata</code> scope when logging in. You can get the user ID value from the <code>sub</code> <a href="https://auth0.com/docs/get-started/apis/scopes/openid-connect-scopes#standard-claims">claim</a> of the user&rsquo;s ID Token, or from the <code>sub</code> property of a <code><a href="Structs/UserInfo.html">UserInfo</a></code> instance.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">users</span><span class="p">(</span><span class="nv">token</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">accessToken</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">patch</span><span class="p">(</span><span class="s">"user id"</span><span class="p">,</span> 
           <span class="nv">userMetadata</span><span class="p">:</span> <span class="p">[</span><span class="s">"first_name"</span><span class="p">:</span> <span class="s">"John"</span><span class="p">,</span> <span class="s">"last_name"</span><span class="p">:</span> <span class="s">"Appleseed"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">user</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Updated user: </span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let user = try await Auth0
        .users(token: credentials.accessToken)
        .patch(&ldquo;user id&rdquo;, 
               userMetadata: [&ldquo;first_name&rdquo;: &ldquo;John&rdquo;, &ldquo;last_name&rdquo;: &ldquo;Appleseed&rdquo;])
        .start()
    print(&ldquo;Updated user: \(user)&rdquo;) 
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .users(token: credentials.accessToken)
    .patch(&ldquo;user id&rdquo;, 
           userMetadata: [&ldquo;first_name&rdquo;: &ldquo;John&rdquo;, &ldquo;last_name&rdquo;: &ldquo;Appleseed&rdquo;])
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { user in
        print(&ldquo;Updated user: \(user)&rdquo;) 
    })
    .store(in: &cancellables)
&ldquo;`
</details>
<h4 id='link-an-account' class='heading'>Link an account</h4>

<p>Your users may want to link their other accounts to the account they are logged in to. To achieve this, you need the user ID for the primary account and the idToken for the secondary account. You also need to request the <code>update:current_user_identities</code> scope when logging in.</p>

<p>You can get the primary user ID value from the <code>sub</code> <a href="https://auth0.com/docs/get-started/apis/scopes/openid-connect-scopes#standard-claims">claim</a> of the primary user&rsquo;s ID Token, or from the <code>sub</code> property of a <code><a href="Structs/UserInfo.html">UserInfo</a></code> instance.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">users</span><span class="p">(</span><span class="nv">token</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">accessToken</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">link</span><span class="p">(</span><span class="s">"primary user id"</span><span class="p">,</span> <span class="nv">withOtherUserToken</span><span class="p">:</span> <span class="s">"secondary id token"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">success</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Accounts linked"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    _ = try await Auth0
        .users(token: credentials.accessToken)
        .link(&ldquo;primary user id&rdquo;, withOtherUserToken: &ldquo;secondary id token&rdquo;)
        .start()
    print(&ldquo;Accounts linked&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .users(token: credentials.accessToken)
    .link(&ldquo;primary user id&rdquo;, withOtherUserToken: &ldquo;secondary id token&rdquo;)
    .start()
    .sink(receiveCompletion: { completion in
        switch completion {
        case .finished:
            print(&ldquo;Accounts linked&rdquo;)
        case .failure(let error):
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { _ in })
    .store(in: &cancellables)
&ldquo;`
</details>
<h4 id='management-api-client-configuration' class='heading'>Management API client configuration</h4>
<h5 id='add-custom-parameters' class='heading'>Add custom parameters</h5>

<p>Use the <code>parameters()</code> method to add custom parameters to any request.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">users</span><span class="p">(</span><span class="nv">token</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">accessToken</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">patch</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span> <span class="nv">userMetadata</span><span class="p">:</span> <span class="n">userMetadata</span><span class="p">)</span> <span class="c1">// Any request</span>
    <span class="o">.</span><span class="nf">parameters</span><span class="p">([</span><span class="s">"key"</span><span class="p">:</span> <span class="s">"value"</span><span class="p">])</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='add-custom-headers' class='heading'>Add custom headers</h5>

<p>Use the <code>headers()</code> method to add custom headers to any request.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">users</span><span class="p">(</span><span class="nv">token</span><span class="p">:</span> <span class="n">credentials</span><span class="o">.</span><span class="n">accessToken</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">patch</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span> <span class="nv">userMetadata</span><span class="p">:</span> <span class="n">userMetadata</span><span class="p">)</span> <span class="c1">// Any request</span>
    <span class="o">.</span><span class="nf">headers</span><span class="p">([</span><span class="s">"key"</span><span class="p">:</span> <span class="s">"value"</span><span class="p">])</span>
    <span class="c1">// ...</span>
</code></pre>
<h5 id='use-a-custom-code-urlsession-code-instance' class='heading'>Use a custom <code>URLSession</code> instance</h5>

<p>You can specify a custom <code>URLSession</code> instance for more advanced networking configuration, e.g. customizing timeout values.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">users</span><span class="p">(</span><span class="nv">session</span><span class="p">:</span> <span class="n">customURLSession</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>
<h4 id='management-api-client-errors' class='heading'>Management API client errors</h4>

<p>The Management API client will only produce <code><a href="Structs/ManagementError.html">ManagementError</a></code> error values. You can find the error information in the <code>info</code> dictionary of the error value. Check the <a href="https://auth0.github.io/Auth0.swift/Structs/ManagementError.html">API documentation</a> to learn more about the available <code><a href="Structs/ManagementError.html">ManagementError</a></code> properties.</p>
<h3 id='logging' class='heading'>Logging</h3>

<p>To enable Auth0.swift to print HTTP requests and responses for debugging, you can call the following method in either <code><a href="Protocols/WebAuth.html">WebAuth</a></code>, <code><a href="Protocols/Authentication.html">Authentication</a></code> or <code><a href="Protocols/Users.html">Users</a></code>:</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">logging</span><span class="p">(</span><span class="nv">enabled</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="c1">// ...</span>
</code></pre>

<p>Then, with a successful authentication you&rsquo;ll see something similar to the following:</p>
<pre class="highlight plaintext"><code>Safari: https://samples.auth0.com/authorize?.....
URL: com.auth0.myapp://samples.auth0.com/ios/com.auth0.MyApp/callback?...
POST https://samples.auth0.com/oauth/token HTTP/1.1
Content-Type: application/json

{"code":"...","client_id":"...","grant_type":"authorization_code","redirect_uri":"com.auth0.MyApp:\/\/samples.auth0.com\/ios\/com.auth0.MyApp\/callback","code_verifier":"..."}

HTTP/1.1 200
Pragma: no-cache
Content-Type: application/json
Strict-Transport-Security: max-age=3600
Date: Thu, 09 Jun 2016 19:04:39 GMT
Content-Length: 57
Cache-Control: no-cache
Connection: keep-alive

{"access_token":"...","token_type":"Bearer"}
</code></pre>

<blockquote>
<p>⚠️ Set this flag only when <strong>DEBUGGING</strong> to avoid leaking user&rsquo;s credentials in the device log.</p>
</blockquote>

<p><a href="#table-of-contents">Go up ⤴</a></p>
<h2 id='advanced-features' class='heading'>Advanced Features</h2>
<h3 id='native-social-login' class='heading'>Native Social Login</h3>
<h4 id='sign-in-with-apple' class='heading'>Sign in With Apple</h4>

<p>If you&rsquo;ve added the <a href="https://developer.apple.com/documentation/authenticationservices/implementing_user_authentication_with_sign_in_with_apple">Sign In with Apple flow</a> to your app, after a successful Sign in With Apple authentication you can use the value of the <code>authorizationCode</code> property to perform a code exchange for Auth0 credentials.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">login</span><span class="p">(</span><span class="nv">appleAuthorizationCode</span><span class="p">:</span> <span class="s">"auth code"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .authentication()
        .login(appleAuthorizationCode: &ldquo;auth code&rdquo;)
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .login(appleAuthorizationCode: &ldquo;auth code&rdquo;)
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 See the <a href="https://auth0.com/docs/connections/social/apple-native">Setting up Sign In with Apple</a> guide for more information about integrating Sign In with Apple with Auth0.</p>
</blockquote>
<h4 id='facebook-login' class='heading'>Facebook Login</h4>

<p>If you&rsquo;ve added the <a href="https://developers.facebook.com/docs/facebook-login/ios">Facebook Login flow</a> to your app, after a successful Faceboook authentication you can request a <a href="https://developers.facebook.com/docs/facebook-login/access-tokens/session-info-access-token/">Session Info Access Token</a> and the Facebook user profile, and then use them both to perform a token exchange for Auth0 credentials.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">login</span><span class="p">(</span><span class="nv">facebookSessionAccessToken</span><span class="p">:</span> <span class="s">"session info access token"</span><span class="p">,</span>
           <span class="nv">profile</span><span class="p">:</span> <span class="p">[</span><span class="s">"key"</span><span class="p">:</span> <span class="s">"value"</span><span class="p">])</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .authentication()
        .login(facebookSessionAccessToken: &ldquo;session info access token&rdquo;,
               profile: [&ldquo;key&rdquo;: &ldquo;value&rdquo;])
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .authentication()
    .login(facebookSessionAccessToken: &ldquo;session info access token&rdquo;,
           profile: [&ldquo;key&rdquo;: &ldquo;value&rdquo;])
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>

<blockquote>
<p>💡 See the <a href="https://auth0.com/docs/connections/social/facebook-native">Setting up Facebook Login</a> guide for more information about integrating Facebook Login with Auth0.</p>
</blockquote>
<h3 id='organizations' class='heading'>Organizations</h3>

<p><a href="https://auth0.com/docs/manage-users/organizations">Organizations</a> is a set of features that provide better support for developers who build and maintain SaaS and Business-to-Business (B2B) applications. </p>

<p>Using Organizations, you can:</p>

<ul>
<li>Represent teams, business customers, partner companies, or any logical grouping of users that should have different ways of accessing your applications, as organizations.</li>
<li>Manage their membership in a variety of ways, including user invitation.</li>
<li>Configure branded, federated login flows for each organization.</li>
<li>Implement role-based access control, such that users can have different roles when authenticating in the context of different organizations.</li>
<li>Build administration capabilities into your products, using Organizations APIs, so that those businesses can manage their own organizations.</li>
</ul>

<blockquote>
<p>💡 Organizations is currently only available to customers on our Enterprise and Startup subscription plans.</p>
</blockquote>
<h4 id='log-in-to-an-organization' class='heading'>Log in to an organization</h4>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">organization</span><span class="p">(</span><span class="s">"YOUR_AUTH0_ORGANIZATION_ID"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<details>
  <summary>Using async/await</summary>

&rdquo;`swift
do {
    let credentials = try await Auth0
        .webAuth()
        .organization(&ldquo;YOUR_AUTH0_ORGANIZATION_ID&rdquo;)
        .start()
    print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
} catch {
    print(&ldquo;Failed with: \(error)&rdquo;)
}
&ldquo;`
</details>

<details>
  <summary>Using Combine</summary>

&rdquo;`swift
Auth0
    .webAuth()
    .organization(&ldquo;YOUR_AUTH0_ORGANIZATION_ID&rdquo;)
    .start()
    .sink(receiveCompletion: { completion in
        if case .failure(let error) = completion {
            print(&ldquo;Failed with: \(error)&rdquo;)
        }
    }, receiveValue: { credentials in
        print(&ldquo;Obtained credentials: \(credentials)&rdquo;)
    })
    .store(in: &cancellables)
&ldquo;`
</details>
<h4 id='accept-user-invitations' class='heading'>Accept user invitations</h4>

<p>To accept organization invitations your application needs to support <a href="https://developer.apple.com/documentation/xcode/allowing_apps_and_websites_to_link_to_your_content/supporting_universal_links_in_your_app">Universal Links</a>, as invitation links are HTTPS-only. Tapping on the invitation link should open your application.</p>

<p>When your application gets opened by an invitation link, grab the invitation URL and pass it to <code>invitationURL()</code>.</p>
<pre class="highlight swift"><code><span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URLContexts</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">url</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>

<span class="c1">// You need to wait for the application to enter the foreground before launching Web Auth</span>
<span class="kt">NotificationCenter</span><span class="o">.</span><span class="k">default</span>
    <span class="o">.</span><span class="nf">publisher</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="o">.</span><span class="n">didBecomeActiveNotification</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">prefix</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">setFailureType</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">WebAuthError</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="c1">// Necessary for iOS 13</span>
    <span class="o">.</span><span class="n">flatMap</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span>
        <span class="kt">Auth0</span>
            <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">invitationURL</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="c1">// 👈🏻</span>
            <span class="o">.</span><span class="nf">start</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="o">.</span><span class="nf">sink</span><span class="p">(</span><span class="nv">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="k">if</span> <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">)</span> <span class="o">=</span> <span class="n">completion</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">credentials</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Obtained credentials: </span><span class="se">\(</span><span class="n">credentials</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>
<h3 id='bot-detection' class='heading'>Bot Detection</h3>

<p>If you are performing database login/signup via the Authentication API and would like to use the <a href="https://auth0.com/docs/secure/attack-protection/bot-detection">Bot Detection</a> feature, you need to handle the <code>isVerificationRequired</code> error. It indicates that the request was flagged as suspicious and an additional verification step is necessary to log the user in. That verification step is web-based, so you need to use Web Auth to complete it.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">authentication</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">login</span><span class="p">(</span><span class="nv">usernameOrEmail</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span> 
           <span class="nv">password</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span> 
           <span class="nv">realmOrConnection</span><span class="p">:</span> <span class="n">connection</span><span class="p">,</span> 
           <span class="nv">scope</span><span class="p">:</span> <span class="n">scope</span><span class="p">)</span>
    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">credentials</span><span class="p">):</span> <span class="c1">// ...</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">)</span> <span class="k">where</span> <span class="n">error</span><span class="o">.</span><span class="nv">isVerificationRequired</span><span class="p">:</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">async</span> <span class="p">{</span>
                <span class="kt">Auth0</span>
                    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
                    <span class="o">.</span><span class="nf">connection</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">scope</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
                    <span class="o">.</span><span class="nf">useEphemeralSession</span><span class="p">()</span>
                    <span class="c1">// ☝🏼 Otherwise a session cookie will remain</span>
                    <span class="o">.</span><span class="nf">parameters</span><span class="p">([</span><span class="s">"login_hint"</span><span class="p">:</span> <span class="n">email</span><span class="p">])</span>
                    <span class="c1">// ☝🏼 So the user doesn't have to type it again</span>
                    <span class="o">.</span><span class="n">start</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
                        <span class="c1">// ...</span>
                    <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span> <span class="c1">// ...</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<p>In the case of signup, you can add an <a href="#signup-with-universal-login-ios--macos">additional parameter</a> to make the user land directly on the signup page.</p>
<pre class="highlight swift"><code><span class="kt">Auth0</span>
    <span class="o">.</span><span class="nf">webAuth</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">parameters</span><span class="p">([</span><span class="s">"login_hint"</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span> <span class="s">"screen_hint"</span><span class="p">:</span> <span class="s">"signup"</span><span class="p">])</span>
    <span class="c1">// ...</span>
</code></pre>

<p>Check how to set up Web Auth in the <a href="#web-auth-configuration-ios--macos">Web Auth Configuration</a> section.</p>
<h2 id='support-policy' class='heading'>Support Policy</h2>

<p>This Policy defines the extent of the support for Xcode, Swift, and platform (iOS, macOS, tvOS, and watchOS) versions in Auth0.swift.</p>
<h3 id='xcode' class='heading'>Xcode</h3>

<p>The only supported versions of Xcode are those that can be currently used to submit apps to the App Store. Once a Xcode version becomes unsupported, dropping it from Auth0.swift <strong>will not be considered a breaking change</strong>, and will be done in a <strong>minor</strong> release.</p>
<h3 id='swift' class='heading'>Swift</h3>

<p>The minimum supported Swift minor version is the one released with the oldest-supported Xcode version. Once a Swift minor becomes unsupported, dropping it from Auth0.swift <strong>will not be considered a breaking change</strong>, and will be done in a <strong>minor</strong> release.</p>
<h3 id='platforms' class='heading'>Platforms</h3>

<p>Only the last 4 major platform versions are supported, starting from:</p>

<ul>
<li>iOS <strong>12</strong></li>
<li>macOS <strong>10.15</strong></li>
<li>Catalyst <strong>13</strong></li>
<li>tvOS <strong>12</strong></li>
<li>watchOS <strong>6.2</strong></li>
</ul>

<p>Once a platform version becomes unsupported, dropping it from Auth0.swift <strong>will not be considered a breaking change</strong>, and will be done in a <strong>minor</strong> release. E.g. iOS 12 will cease to be supported when iOS 16 gets released, and Auth0.swift will be able to drop it in a minor release.</p>

<p>In the case of macOS, the yearly named releases are considered a major platform version for the purposes of this Policy, regardless of the actual version numbers.</p>
<h2 id='issue-reporting' class='heading'>Issue Reporting</h2>

<p>For general support or usage questions, use the <a href="https://community.auth0.com/tags/c/sdks/5/swift">Auth0 Community</a> forums or raise a <a href="https://support.auth0.com/">support ticket</a>. Only <a href="https://github.com/auth0/Auth0.swift/issues">raise an issue</a> if you have found a bug or want to request a feature.</p>

<p><strong>Do not report security vulnerabilities on the public GitHub issue tracker.</strong> The <a href="https://auth0.com/responsible-disclosure-policy">Responsible Disclosure Program</a> details the procedure for disclosing security issues.</p>
<h2 id='what-is-auth0' class='heading'>What is Auth0?</h2>

<p>Auth0 helps you to:</p>

<ul>
<li>Add authentication with <a href="https://auth0.com/docs/authenticate/identity-providers">multiple sources</a>, either social identity providers such as <strong>Google, Facebook, Microsoft Account, LinkedIn, GitHub, Twitter, Box, Salesforce</strong> (amongst others), or enterprise identity systems like <strong>Windows Azure AD, Google Apps, Active Directory, ADFS, or any SAML Identity Provider</strong>.</li>
<li>Add authentication through more traditional <strong><a href="https://auth0.com/docs/authenticate/database-connections/custom-db">username/password databases</a></strong>.</li>
<li>Add support for <strong><a href="https://auth0.com/docs/manage-users/user-accounts/user-account-linking">linking different user accounts</a></strong> with the same user.</li>
<li>Support for generating signed <a href="https://auth0.com/docs/secure/tokens/json-web-tokens">JSON Web Tokens</a> to call your APIs and <strong>flow the user identity</strong> securely.</li>
<li>Analytics of how, when, and where users are logging in.</li>
<li>Pull data from other sources and add it to the user profile through <a href="https://auth0.com/docs/customize/actions">JavaScript Actions</a>.</li>
</ul>

<p><strong>Why Auth0?</strong> Because you should save time, be happy, and focus on what really matters: building your product.</p>
<h2 id='license' class='heading'>License</h2>

<p>This project is licensed under the MIT license. See the <a href="LICENSE">LICENSE</a> file for more information.</p>

<hr>

<p><a href="#table-of-contents">Go up ⤴</a></p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2022 <a class="link" href="https://auth0.com" target="_blank" rel="external noopener">Auth0</a>. All rights reserved. (Last updated: 2022-04-29)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
